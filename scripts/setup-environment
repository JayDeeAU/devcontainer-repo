#!/usr/bin/env bash
# scripts/setup-environment
# Complete environment setup - dotfiles, project dependencies, and docker context

set -e

echo "ğŸš€ Setting up development environment..."

# Setup dotfiles
echo "ğŸ  Setting up dotfiles..."
if [ ! -d ~/dotfiles ]; then
    git clone https://github.com/JayDeeAU/dotfiles.git ~/dotfiles
    cd ~/dotfiles
    chmod +x ./dotbootstrap.sh
    ./dotbootstrap.sh || echo "âš ï¸ Dotfiles setup failed, continuing..."
    cd -
else
    echo "ğŸ“ Dotfiles directory already exists, skipping clone"
fi

# Setup project dependencies
echo "ğŸ“¦ Setting up project dependencies..."
chmod +x .devcontainer/scripts/setup-project-dependencies
.devcontainer/scripts/setup-project-dependencies

# Set docker context
echo "ğŸ³ Setting docker context..."
docker context use default

echo "âœ… Environment setup completed"